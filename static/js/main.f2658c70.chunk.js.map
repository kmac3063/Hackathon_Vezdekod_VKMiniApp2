{"version":3,"sources":["panels/Home.js","img/persik.png","panels/WelcomeScreen.js","App.js","index.js"],"names":["Home","id","go","fetchedUser","useState","bitsSize","setBitsSize","Array","from","length","v","i","bitsInSecond","setBitsInSecond","setEnable","currentSecond","setCurrentSecond","myInterval","setMyInterval","getString","index","stopPressed","clearInterval","console","log","bridge","send","top","placeholder","options","res","push","value","label","getSecondOptions","onChange","e","parseInt","target","style","display","size","stretched","marginRight","onClick","sec","timerId","setInterval","mode","map","bool","after","switchChange","backgroundColor","WelcomeScreen","icon","header","action","data-to","App","activePanel","setActivePanel","setUser","popout","setPopout","useEffect","a","user","then","p","is_available","alert","subscribe","detail","type","data","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","fetchData","checkAvailable","currentTarget","dataset","to","ReactDOM","render","getElementById"],"mappings":"wNA6GeA,EA3FF,SAAC,GAA2B,IAA1BC,EAAyB,EAAzBA,GAGX,GAHoC,EAArBC,GAAqB,EAAjBC,YAGaC,mBAFb,IAEnB,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAwCF,mBAASG,MAAMC,KAAK,CAACC,OAAQJ,IAAW,SAACK,EAAGC,GAAJ,OAAU,MAA1F,mBAAOC,EAAP,KAAqBC,EAArB,KACA,EAA4BT,oBAAS,GAArC,mBAAeU,GAAf,WACA,EAA0CV,mBAAS,GAAnD,mBAAOW,EAAP,KAAsBC,EAAtB,KACA,EAAoCZ,mBAAS,MAA7C,mBAAOa,EAAP,KAAmBC,EAAnB,KAEMC,EAAY,SAACC,GACf,IAAIT,EAAIS,EAAQ,EAChB,OAAIT,EAAI,KAAO,EACJA,EAAI,qDAERA,EAAI,4DAkCTU,EAAc,WAChBC,cAAcL,GACdD,EAAiB,GACjBO,QAAQC,IAAI,SACZC,IAAOC,KAAK,wBAAyB,CAAC,MAAS,KAGnD,OAAO,eAAC,IAAD,CAAOzB,GAAIA,EAAX,UACH,cAAC,IAAD,2GACA,eAAC,IAAD,WACI,cAAC,IAAD,CAAU0B,IAAI,oGAAd,SACI,cAAC,IAAD,CACIC,YAAY,6CACZC,QA5CS,WAErB,IADA,IAAIC,EAAM,GACDnB,EAAI,EAAGA,GAAK,GAAIA,IACrBmB,EAAIC,KAAK,CAACC,MAAQrB,EAAI,EAAIsB,MAAOtB,EAAI,yBAEzC,OAAOmB,EAuCcI,GACTF,MAAO3B,EAAW,EAClB8B,SAAU,SAACC,GACP9B,EAAY+B,SAASD,EAAEE,OAAON,OAAS,GACvCnB,EAAgBN,MAAMC,KAAK,CAACC,OAAQ4B,SAASD,EAAEE,OAAON,OAAS,IAAI,SAACtB,EAAGC,GAAJ,OAAU,MAC7EU,IACAP,GAAU,QAItB,eAAC,IAAD,CAAKyB,MAAO,CAACC,QAAS,QAAtB,UACI,cAAC,IAAD,CAAQC,KAAK,IAAIC,WAAS,EAACH,MAAO,CAACI,YAAa,GAAIC,QAzC3C,WACE,OAAf3B,GACAK,cAAcL,GAElB,IAAI4B,EAAM,EACV7B,EAAiB,GACjBO,QAAQC,IAAIZ,EAAaiC,EAAM,IAC/BpB,IAAOC,KAAK,wBAAyB,CAAC,MAASd,EAAaiC,EAAM,KAClE,IAAIC,EAAUC,aAAY,WAEtB/B,EADA6B,EAAM,EAAKA,EAAQxC,GAEnBkB,QAAQC,IAAIZ,EAAaiC,EAAM,IAC/BpB,IAAOC,KAAK,wBAAyB,CAAC,MAASd,EAAaiC,EAAM,OACnE,KACH3B,EAAc4B,IA2BN,kDACA,cAAC,IAAD,CAAQL,KAAK,IAAIC,WAAS,EAACM,KAAK,YAAYJ,QAASvB,EAArD,gFAGR,eAAC,IAAD,WACI,cAAC,IAAD,CAAQ2B,KAAK,YAAb,iIACCpC,EAAaqC,KAAI,SAACC,EAAM9B,GACrB,OAAO,cAAC,IAAD,CACJ+B,MAAO,cAAC,IAAD,CAAQhB,SAAU,SAACC,IAvDpB,SAAChB,EAAOY,GACzBlB,GAAU,GACVO,IACAT,EAAaQ,GAA+B,EAAtBR,EAAaQ,GAoDSgC,CAAahC,EAAOgB,EAAEE,OAAON,UAC7DO,MAAO,CAACc,gBAAiBjC,EAAQ,IAAML,EAAe,UAAW,WAF9D,SAIFI,EAAUC,IAJSA,a,GCjGzB,I,QC6BAkC,EAxBO,SAAC,GAA2B,IAA1BrD,EAAyB,EAAzBA,GAAiBC,GAAQ,EAArBC,YAAqB,EAARD,IAQrC,OACI,cAAC,IAAD,CAAOD,GAAIA,EAAX,SAEI,cAAC,IAAD,UACI,cAAC,IAAD,CACIsD,KAAM,cAAC,IAAD,IACNC,OAAQ,8HACRC,OAAQ,cAAC,IAAD,CAAQhB,KAAK,IAAIG,QAAS1C,EAAIwD,UAAQ,OAAtC,gHAHZ,uSC2CDC,EApDH,WACR,MAAsCvD,mBAAS,iBAA/C,mBAAOwD,EAAP,KAAoBC,EAApB,KACA,EAA+BzD,mBAAS,MAAxC,mBAAOD,EAAP,KAAoB2D,EAApB,KACA,EAA4B1D,mBAAS,cAAC,IAAD,CAAeqC,KAAK,WAAzD,mBAAOsB,EAAP,KAAeC,EAAf,KAEAC,qBAAU,WAAM,4CASZ,4BAAAC,EAAA,6DACIF,EAAU,MADd,SAEuBvC,IAAOC,KAAK,uBAFnC,OAEUyC,EAFV,OAGIL,EAAQK,GAHZ,4CATY,kEAeZ,sBAAAD,EAAA,sDACIzC,IAAOC,KAAK,wBAAwB0C,MAChC,SAACC,GACQA,EAAEC,cACHC,MAAM,8RAJtB,4CAfY,sBACZ9C,IAAO+C,WAAU,YAA6B,IAAD,IAA1BC,OAASC,EAAiB,EAAjBA,KAAMC,EAAW,EAAXA,KAC9B,GAAa,yBAATD,EAAiC,CACjC,IAAME,EAAkBC,SAASC,gBAAgB,UACjDF,EAAgB5C,MAAQ2C,EAAKI,OAASJ,EAAKI,OAAS,eACpDF,SAASG,KAAKC,WAAWC,aAAaN,OALlC,mCA2BZO,GA3BY,mCA4BZC,KACD,IAEH,IAAMlF,EAAK,SAAAkC,GACPyB,EAAezB,EAAEiD,cAAcC,QAAQC,KAG3C,OACI,cAAC,IAAD,UACI,cAAC,IAAD,UACI,eAAC,IAAD,CAAM3B,YAAaA,EAAaG,OAAQA,EAAxC,UACI,cAAC,EAAD,CAAe9D,GAAG,gBAAgBE,YAAaA,EAAaD,GAAIA,IAChE,cAAC,EAAD,CAAMD,GAAG,OAAOE,YAAaA,EAAaD,GAAIA,YC/ClEuB,IAAOC,KAAK,gBAEZ8D,IAASC,OAAO,cAAC,EAAD,IAASZ,SAASa,eAAe,W","file":"static/js/main.f2658c70.chunk.js","sourcesContent":["import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n    Panel,\n    PanelHeader,\n    Header,\n    Button,\n    Group,\n    Cell,\n    Div,\n    Avatar,\n    SimpleCell,\n    Switch,\n    FormItem, Select\n} from '@vkontakte/vkui';\nimport bridge from \"@vkontakte/vk-bridge\";\n\nconst Home = ({id, go, fetchedUser}) => {\n    const START_SIZE = 8\n\n    const [bitsSize, setBitsSize] = useState(START_SIZE)\n    const [bitsInSecond, setBitsInSecond] = useState(Array.from({length: bitsSize}, (v, i) => 0))\n    const [enable, setEnable] = useState(false)\n    const [currentSecond, setCurrentSecond] = useState(0)\n    const [myInterval, setMyInterval] = useState(null)\n\n    const getString = (index) => {\n        let i = index + 1\n        if (i % 10 === 3) {\n            return i + \"-я секунда\"\n        }\n        return i + \"-ая секунда\"\n    }\n\n    const getSecondOptions = () => {\n        let res = []\n        for (let i = 1; i <= 60; i++) {\n            res.push({value: (i - 1), label: i + \" сек.\"})\n        }\n        return res\n    }\n\n    const switchChange = (index, value) => {\n        setEnable(false)\n        stopPressed()\n        bitsInSecond[index] = bitsInSecond[index] ^ 1\n    }\n\n    const startPressed = () => {\n        if (myInterval !== null) {\n            clearInterval(myInterval)\n        }\n        let sec = 1\n        setCurrentSecond(1)\n        console.log(bitsInSecond[sec - 1])\n        bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": bitsInSecond[sec - 1]});\n        let timerId = setInterval(() => {\n            sec = 1 + (sec) % (bitsSize)\n            setCurrentSecond(sec)\n            console.log(bitsInSecond[sec - 1])\n            bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": bitsInSecond[sec - 1]});\n        }, 1000);\n        setMyInterval(timerId)\n    }\n\n    const stopPressed = () => {\n        clearInterval(myInterval)\n        setCurrentSecond(0)\n        console.log(\"Stop!\")\n        bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 0});\n    }\n\n    return <Panel id={id}>\n        <PanelHeader>Один-ноль фонарик</PanelHeader>\n        <Group>\n            <FormItem top=\"Количество секунд\">\n                <Select\n                    placeholder=\"Выбрать\"\n                    options={getSecondOptions()}\n                    value={bitsSize - 1}\n                    onChange={(e) => {\n                        setBitsSize(parseInt(e.target.value) + 1)\n                        setBitsInSecond(Array.from({length: parseInt(e.target.value) + 1}, (v, i) => 0))\n                        stopPressed()\n                        setEnable(false)\n                    }}\n                />\n            </FormItem>\n            <Div style={{display: 'flex'}}>\n                <Button size=\"l\" stretched style={{marginRight: 8}} onClick={startPressed}>Начать</Button>\n                <Button size=\"l\" stretched mode=\"secondary\" onClick={stopPressed}>Остановить</Button>\n            </Div>\n        </Group>\n        <Group>\n            <Header mode=\"secondary\">Управление секундами</Header>\n            {bitsInSecond.map((bool, index) => {\n                return <SimpleCell key={index}\n                   after={<Switch onChange={(e) => {switchChange(index, e.target.value); }}/>}\n                    style={{backgroundColor: index + 1 === currentSecond? \"#D7FDDB\": \"#FFFFFF\"}}\n                >\n                    {getString(index)}\n                </SimpleCell>\n            })\n            }\n        </Group>\n    </Panel>\n}\n\nexport default Home;\n","export default __webpack_public_path__ + \"static/media/persik.ae9f0072.png\";","import React from \"react\";\r\nimport {Button, Group, Panel, PanelHeader, PanelHeaderBack, Placeholder} from \"@vkontakte/vkui\";\r\nimport persik from \"../img/persik.png\";\r\nimport {Icon56UsersOutline} from \"@vkontakte/icons\";\r\n\r\nconst WelcomeScreen = ({id, fetchedUser, go}) => {\r\n    const getName = (user) => {\r\n        // if (user == null || user.first_name == null)\r\n        //     return \"Друже\"\r\n        // return fetchedUser.first_name\r\n        return \"Приятель\"\r\n    }\r\n\r\n    return (\r\n        <Panel id={id}>\r\n            {/*<PanelHeader right={<Avatar size={36} />}>Panel 1</PanelHeader>*/}\r\n            <Group>\r\n                <Placeholder\r\n                    icon={<Icon56UsersOutline />}\r\n                    header={\"Приветствуем, \" + getName(fetchedUser) + \"!\"}\r\n                    action={<Button size=\"m\" onClick={go} data-to=\"Home\">Перейти к фонарику</Button>}\r\n                >\r\n                    Приложение разработано в рамках хакатона \"Вездекод 2021\"\r\n                </Placeholder>\r\n            </Group>\r\n        </Panel>\r\n    )\r\n}\r\n\r\nexport default WelcomeScreen;","import React, {useState, useEffect} from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport {View, ScreenSpinner, AdaptivityProvider, AppRoot} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\nimport WelcomeScreen from \"./panels/WelcomeScreen\";\n\nconst App = () => {\n    const [activePanel, setActivePanel] = useState('WelcomeScreen');\n    const [fetchedUser, setUser] = useState(null);\n    const [popout, setPopout] = useState(<ScreenSpinner size='large'/>);\n\n    useEffect(() => {\n        bridge.subscribe(({detail: {type, data}}) => {\n            if (type === 'VKWebAppUpdateConfig') {\n                const schemeAttribute = document.createAttribute('scheme');\n                schemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n                document.body.attributes.setNamedItem(schemeAttribute);\n            }\n        });\n\n        async function fetchData() {\n            setPopout(null);\n            const user = await bridge.send('VKWebAppGetUserInfo');\n            setUser(user);\n        }\n\n        async function checkAvailable() {\n            bridge.send(\"VKWebAppFlashGetInfo\").then(\n                (p) => {\n                    if (!p.is_available) {\n                        alert(\"На вашем устройстве отсутствует/не работает фонарик :(\")\n                    }\n                }\n            )\n        }\n\n\n\n        fetchData();\n        checkAvailable()\n    }, []);\n\n    const go = e => {\n        setActivePanel(e.currentTarget.dataset.to);\n    };\n\n    return (\n        <AdaptivityProvider>\n            <AppRoot>\n                <View activePanel={activePanel} popout={popout}>\n                    <WelcomeScreen id='WelcomeScreen' fetchedUser={fetchedUser} go={go}/>\n                    <Home id='Home' fetchedUser={fetchedUser} go={go}/>\n                </View>\n            </AppRoot>\n        </AdaptivityProvider>\n    );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}